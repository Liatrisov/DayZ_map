var dzMap=new function(){var a=this;a.buildings=[];a.markers=[];a.loadedSets={};a.shownSets={};a.mapId=0;a.mapType=-1;a.map=null;a.canvas=null;a.projection=null;var e=!1,k=!1,p=[],l=function(a){if(localStorage)return localStorage[a]};a.onLoaded=function(){if(e){k=!1;var b=a.buildings,d=a.markers,c;a.canvas.setAutoRedraw(!1);var f=b.length;for(c=0;c<f;++c)dzMarkers.addBuilding(b[c].id,b[c].lat,b[c].lng,b[c].t,b[c].s,b[c].b);b=d.length;for(c=0;c<b;++c)dzMarkers.addMarker(0,d[c].id,d[c].lat,d[c].lng,d[c].t,d[c].i,d[c].n,d[c].b);a.canvas.setAutoRedraw(!0);a.canvas.redraw()}
else k=!0};a.requestSet=function(b,d){void 0!==a.loadedSets[b]?a.shownSets[b]||g.apply(null,a.loadedSets[b]):function(b,d){$.ajax("/markers?set="+b+(d?"&password="+encodeURIComponent(d):""),{success:function(b){if(b.error)alert("Error loading set: "+b.error);else if(b.passworded){var c=b.id;(b=prompt('The marker set "'+b.name+'" requires a password:',""))&&a.requestSet(c,b)}else g(b.id,b.name,b.markers,b.user,b.access,d)}})}(b,d)};var g=function(b,d,c,f,k,g){if(e){a.loadedSets[b]||(a.loadedSets[b]=[b,d,c,f,k,g]);a.shownSets[b]=!0;a.canvas.setAutoRedraw(!1);for(var t=c.length,n,u=0;u<t;++u)n=c[u],dzMarkers.addMarker(b,n.id,n.lat,n.lng,n.t,n.i,n.n,n.b);a.canvas.setAutoRedraw(!0);a.canvas.redraw();c=(c=l("LoadedSets"+a.mapId))?JSON.parse(c):{};c[b]=g?g:!1;g=JSON.stringify(c);localStorage&&(localStorage["LoadedSets"+a.mapId]=g);$("#markerSetsList").append($("<tr/>",{id:"visibleMap"+b}).append($("<td/>").append(d)).append($("<td/>",{css:{"text-align":"right"}}).append($("<button/>",{"class":"btn btn-primary btn-mini",text:"Share","data-id":b,click:markerSetShareButton})).append(" ").append(0!=dayzCurrentUser.id&&(1==k||f==dayzCurrentUser.id||1==dayzCurrentUser.access)?$("<button/>",{"class":"btn btn-mini",text:"Edit","data-id":b,click:markerSetEditButton}):"").append(" ").append($("<button/>",{id:"visibleMapToggle"+b,"class":"btn btn-inverse btn-mini",text:"Hide","data-id":b,click:markerSetToggleButton})).append(" ").append($("<button/>",{"class":"btn btn-danger btn-mini",text:"Remove","data-id":b,click:markerSetRemoveButton}))));$("#userMap"+b+" button.btn-inverse").detach()}else p.push([b,d,c,f,k,g])};a.removeSet=function(b){if(a.shownSets[b]){dzMarkers.removeSet(b);a.shownSets[b]=!1;var d=l("LoadedSets"+a.mapId);d&&(d=JSON.parse(d),delete d[b],d=JSON.stringify(d),localStorage&&(localStorage["LoadedSets"+a.mapId]=d));$("#visibleMap"+b).detach();(d=$("#userMap"+b+" td:last-child"))&&d.append($("<button/>",{"class":"btn btn-inverse btn-mini",text:"Add to map","data-id":b,click:markerSetAddButton}))}};a.init=function(b){a.mapId=b;var d=0,c;if(1<dayzMapTypes.length){(b=l("MapType"+b))&&dayzMapTypes[b]&&(d=b);c=$("#mapType");var f=$("#mapTypeButton");b=$("#mapType ul");c.show();f.text(dayzMapNames[d]);for(c=0;c<dayzMapTypes.length;++c){var v=$("<a/>",{href:"javascript:;",text:dayzMapNames[c],"data-id":c,click:function(){var b=$(this).attr("data-id");f.text(dayzMapNames[b]);a.setType(b)}});b.append($("<li/>").append(v))}}
a.setType(d);dzMarkers.init();e=!0;if(k)a.onLoaded();for(c=0;c<p.length;++c)g.apply(a,p[c]);p=[];if(d=l("LoadedSets"+a.mapId)){var d=JSON.parse(d),s;for(s in d)a.requestSet(s,d[s])}};a.setType=function(b){if(a.mapType!==b){a.type=b;a.projection=dayzProjections[b];var d=dayzMapTypes[b];if(a.map){var c=a.map.getCenter();a.map.removeLayer(a.map.options.layers[0]);a.map.addLayer(d.layers[0]);L.Util.setOptions(a.map,d);a.map.fire("viewreset",{hard:!0});d.layers[0]._update();a.canvas._update();a.map.panTo(c)}else{for(var c=location.hash.substr(1).split(";"),e,k=0;k<c.length;++k)if(null!==(e=/^(\d)\.(\d{3})\.(\d{3})$/.exec(c[k]))){d.zoom=parseInt(e[1],10);var g=fromGpsToCoord(e[2]);e=fromGpsToCoord(e[3]);d.center=L.latLng(e,g,!0)}else null!==(e=/^set=(\d+)$/.exec(c[k]))&&a.requestSet(e[1]);a.map=L.map("map",d);a.canvas=L.canvasLayer({zIndex:10}).addTo(a.map);a.map.on("mousemove",function(a){$("#mapCoords").html(fromLatLngToGps(a.latlng))});a.map.on("dragend",a.updateHash);a.map.on("zoomend",a.updateHash);a.map.on("dragstart",function(){$("#contextLoot").hide();$("#contextMenu").hide();});a.map.on("zoomstart",function(){$("#contextLoot").hide();$("#contextMenu").hide();});var s=L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/target-white.png?1",iconSize:[19,19]}}),c=null,g=null,p=null,q=function(){c&&(a.map.removeLayer(c),c=null);x()},x=function(){g&&(a.map.removeLayer(g),g=null);p&&(a.map.removeLayer(p),p=null)};a.startMeasuring=function(b){if(!a.map.clicksBlocked){if($("#contextLoot").is(':visible')||$("#contextMenu").is(':visible')){$("#contextLoot").hide();$("#contextMenu").hide();return false;}else{a.map.off("click",a.startMeasuring);a.map.on("click",a.finishMeasuring);q();c=L.marker(b.latlng,{icon:new s,clickable:!1,zIndexOffset:500});a.map.addLayer(c);}}};a.finishMeasuring=function(b){a.map.off("click",a.startMeasuring);a.map.off("click",a.finishMeasuring);a.map.on("click",a.clearMeasuring);if(c){x();var d=c._latlng,e=Math.floor(d.distanceTo(b.latlng)/ 111);
g=L.marker(b.latlng,{icon:new s,clickable:!1,zIndexOffset:500});b=L.latLng((b.latlng.lat+d.lat)/2,(b.latlng.lng+d.lng)/2);
p=L.marker(b,{icon:L.divIcon({iconSize:null,className:"map-distance",html:"<span>"+e+"m</span>"}),clickable:!1,zIndexOffset:550});a.map.addLayer(g);a.map.addLayer(p)}};a.clearMeasuring=function(){a.map.off("click",a.finishMeasuring);a.map.off("click",a.clearMeasuring);a.map.on("click",a.startMeasuring);q()};if($(".leaflet-container").css('cursor')!='crosshair'){a.map.on("click",a.startMeasuring);}}
localStorage&&(localStorage["MapType"+a.mapId]=b)}};a.updateHash=function(){var b=a.map.getCenter(),b="#"+a.map.getZoom()+"."+fromCoordToGps(b.lng)+"."+fromCoordToGps(b.lat);location.replace(b)}};function fromCoordToGps(a){a=Math.abs(a);var e=(1E3*a).toString();return e=0.1>a?"000":1>a?"00"+e.substr(0,1):10>a?"0"+e.substr(0,2):100>a?e.substr(0,3):"999"}
function fromGpsToCoord(a){return 0.1*parseInt(a,10)}
function fromLatLngToGps(a){var e=fromCoordToGps(a.lat);return fromCoordToGps(a.lng)+" "+e}
var linkToThis=function(){prompt("Copy and paste the following URL to link to this map:",location.href)};$(document).ready(function(){$("#sidebarButton").click(function(){$(this).toggleClass("closed");$("#sidebar").toggle();$("#mapContainer").toggleClass("expanded");dzMap.map.invalidateSize()});$("button.iconToggle").click(function(){var a=$(this),e=a.attr("data-type");dzMap.updateHash();var k=!a.hasClass("active");"other"==e||"vehicles"==e||"nature"==e||"animals"==e||"v3s"==e||"helicrash"==e?(a=$("div."+e+"-group input.iconToggle"),a.each(function(){var a=$(this);!k&&a.is(":checked")?(a.removeAttr("checked"),dzMarkers.toggleMarkers(k,a.attr("data-type"))):k&&a.is(":not(:checked)")&&(a.attr("checked",!0),dzMarkers.toggleMarkers(k,a.attr("data-type")))})):(a=$('input.iconToggle[data-type="'+e+'"]'),k?a.attr("checked",!0):a.removeAttr("checked"),dzMarkers.toggleMarkers(k,e))});$("input.iconToggle").change(function(){var a=$(this),e=a.attr("data-type"),k=a.attr("data-value");dzMap.updateHash();var p=a.is(":checked"),a=a.closest("div.btn-group"),l=a.children("button.iconToggle"),g=$("input.iconToggle:checked",a);g_total=$("input.iconToggle",a);if(g.length>0){if(!l.hasClass("active")){l.addClass("active");}
if(g.length>=1&&g.length<g_total.length){var i=l.find('i');i.removeClass('icon-check');i.removeClass('icon-times');i.addClass('icon-circle-o');}else{var i=l.find('i');i.removeClass('icon-circle-o');i.addClass('icon-check');}}else if(g.length==0&&l.hasClass("active")){l.removeClass("active");}
dzMarkers.toggleMarkers(p,e,k);});$(".dropdown-menu input, .dropdown-menu label").click(function(a){a.stopPropagation()})});var dzMarkers=new function(){var a=this;a.markers=[];var e=null,k=null;a.init=function(){e=dzMap.canvas;k=dzMap.map};a.addBuilding=function(b,c,h,d,q,r){var m,g;a.buildingOverrides[r]&&(d=a.buildingOverrides[r]);if(a.markerTypes[d]){var f=a.markerTypes[d];m=f.icon;if(f.sized){for(f=0;3>f;++f)q>a.sizeThresholds[f]&&(g=a.sizeNames[f]);m+="-"+g}
if(a.markerIcons[m])m=new a.markerIcons[m];else return console.log("Unhandled marker icon: "+m),!1}else return console.log("Unhandled marker type",d),!1;var f=a.markerTypes[d].name,n=a.zIndex["default"];void 0!==a.zIndex[g]?n=a.zIndex[g]:void 0!==a.zIndex[d]&&(n=a.zIndex[d]);c=L.marker(L.latLng(c,h,!0),{icon:m,clickable:!0,title:b,zIndexOffset:n});c.info={buildingId:b,building:r,type:d,size:q};e.addLayer(c);if(m instanceof L.DivIcon){k.on("viewreset",l,c),l.call(c);}
a.markers.push(c);return c};a.addMarker=function(b,c,h,d,q,r,m,g){var f;if("label"==q)m=m.replace(/(.+)\/\/(.+)$/,"$1<br><small>$2</small>"),f=L.divIcon({iconSize:null,className:"map-label "+g,html:"<span>"+m+"</span>"});else{if(!b&&"pump"==r)return;if(a.markerIcons[r])g=new a.markerIcons[r];else return console.log("Unhandled marker icon: "+r),!1}
var n=a.zIndex["default"];void 0!==a.zIndex[q]&&(n=a.zIndex[q]);h=L.marker(L.latLng(h,d,!0),{icon:f,clickable:b?!0:!1,title:"label"!=q?m:"",zIndexOffset:n});L.stamp(h);h.info={setId:b,markerId:c,building:g,type:q,name:m,icon:r};e.addLayer(h);f instanceof L.DivIcon&&(k.on("viewreset",l,h),l.call(h));if(b){h.on("",p);h.on("contextmenu",p);}
a.markers.push(h);return h};a.removeSet=function(b){var c=a.markers,h=c.length;e.setAutoRedraw(!1);for(var d=0;d<h;)c[d].info.setId===b?(e.removeLayer(c[d]),c.splice(d,1),--h):++d;e.setAutoRedraw(!0);e.redraw()};function strpos(haystack,needle,offset){var i=(haystack+'').indexOf(needle,(offset||0));return i===-1?false:i;}
var p=function(e){var building=this.info.building;var buildingId=this.info.buildingId;$("#contextLoot").html('');if(building.indexOf('photo_')>-1){$('body.map').addClass('loading');$.ajax("http://www.dayztv.com/map/loot.php?map="+ dzMap.mapId+"&building="+ building,{success:function(response){$('body.map').removeClass('loading');$("#contextLoot").html(response);},error:function(){$('body.map').removeClass('loading');}})}else{var hash=window.location.hash;$.get('http://www.dayztv.com/map/static/img/loot/'+ building+'.jpg').done(function(){$("#contextLoot #loot_img").html('<img src="http://www.dayztv.com/map/static/img/loot/'+ building+'.jpg" style="display:block; height:auto; max-width:200px;" onerror="this.style.visibility = \'hidden\'" />');});var contextLoot=''
contextLoot+='<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">';contextLoot+='	<li><span style="line-height:18px; padding:3px 15px; white-space:nowrap; display:block; font-weight:bold; text-align:center;">'+ buildingId+'</span></li>';contextLoot+='	<li class="divider"></li>';contextLoot+='	<li style="padding:3px 15px; display:block;">';contextLoot+='		<div id="loot_img" style="display:block; height:113px; width:200px; background:#eee;">';contextLoot+='		</div>';contextLoot+='	</li>';contextLoot+='	<li class="divider"></li>';contextLoot+='	<li><span style="line-height:18px; padding:3px 15px; white-space:nowrap; display:block; color:#888;"><i class="icon-info-circle icon-fw"></i> Name: '+ building+'</span></li>';contextLoot+='	<li class="divider"></li>';contextLoot+='	<li><a href="http://www.dayztv.com/map/b/'+ building+'/'+ hash+'"><i class="icon-crosshairs icon icon-fw"></i> Filter Building</a></li>';contextLoot+='	<li><a href="javascript:void(0);" onclick="dzMarkers.closeTooltip();"style="color:#bb0000;"><i class="icon-times icon icon-fw"></i> Exit</a></li>';contextLoot+='</ul>';$("#contextLoot").html(contextLoot);$("#contextLoot").hide();}
$("#contextLoot").css({display:"block",left:e.originalEvent.containerPoint.x,top:e.originalEvent.containerPoint.y});};a.openTooltip=function(){$("#sidebar").addClass("tip-open");var a=$("#sidebarButton");a.hasClass("closed")&&a.click()};a.closeTooltip=function(){$("#contextLoot").hide()};var l=function(){if(this._icon){var a=k.getZoom(),b=$(this._icon);b.hasClass("light")?3>a?b.css({visibility:"hidden"}):b.css({visibility:""}):b.is(".light, .medium, .heavy")||(2>a?b.css({visibility:"hidden"}):b.css({visibility:""}))}};a.toggleMarkers=function(b,c,h){var d=a.markers.length,f=a.markers,g;e.setAutoRedraw(!1);if(h){var m=a.nameSizes[h];if(!m)return;for(h=0;h<d;++h)g=f[h],g.info.setId||g.info.type!=c||g.info.size>=m[0]&&g.info.size<m[1]&&g.setVisible(b)}else for(h=0;h<d;++h)g=f[h],g.info.setId||g.info.type!=c||g.setVisible(b);e.setAutoRedraw(!0);e.redraw()};a.toggleSet=function(b){var c=a.markers,h=c.length,d,g=!0;dzMap.loadedSets[b].hidden&&(g=!1);dzMap.loadedSets[b].hidden=g;e.setAutoRedraw(!1);for(var f=0;f<h;++f)d=c[f],d.info.setId===b&&(d.info.hidden=g,d.setVisible(!g));e.setAutoRedraw(!0);e.redraw()};var g=!1,b=!1,d={},c=[],f=[];a.editSet=function(b){var c=dzMap.loadedSets[b];if(c&&(1==c.access||c.user==dayzCurrentUser.id||1==dayzCurrentUser.access)){g&&v();g=b;$("#sidebar").addClass("editor-open");var c=a.markers,d=c.length,f;e.setAutoRedraw(!1);for(var k=0;k<d;++k)f=c[k],f.info.setId===b?(f.info.editing=!0,f.off("click",p),f.on("click",t),f.on("dragend",s),f.setClickable(!0),f.setDraggable(!0),f.setVisible(!0)):f.setVisible(!1);e.setAutoRedraw(!0);e.redraw()}};var v=function(){if(g&&(!(0<c.length||0<f.length||0<Object.keys(d).length)||confirm("You have unsaved changes to this set. Do you want to discard them?"))){g=!1;d={};f=[];c=[];n();$("#sidebar").removeClass("editor-open");var b=a.markers,k=b.length,h;e.setAutoRedraw(!1);for(var l=0;l<k;++l)h=b[l],h.info.editing?(h.setDraggable(!1),h.off("dragend",s),h.off("click",t),h.on("click",p),h.info.editing=!1,"label"==h.info.type&&h.setClickable(!1)):h.info.hidden||h.setVisible(!0);e.setAutoRedraw(!0);e.redraw()}},s=function(){var a=this._latlng,c=d[this.markerId];void 0===c?d[this.info.markerId]={id:this.info.markerId,lat:a.lat,lng:a.lng,icon:this.info.icon,type:this.info.type,name:this.info.name,building:this.info.building}:(c.lat=a.lat,c.lng=a.lng);b&&(b.info.markerId&&b.info.markerId==this.info.markerId)&&($("#markerLatInput").val(a.lat),$("#markerLngInput").val(a.lng))},t=function(){b=this;var a=b._latlng;$("#markerNameInput").val(b.info.name);$("#markerTypeInput").val(b.info.type);$("#markerBuildingInput").val(b.info.building);$("#markerIconInput").val(b.info.icon);$("#markerLatInput").val(a.lat);$("#markerLngInput").val(a.lng)},n=function(){$("#markerLatInput").val("");$("#markerLngInput").val("");$("#markerNameInput").val("");$("#markerBuildingInput").val("")},u=function(a){a&&a.preventDefault();if(b&&confirm("Are you sure you want to delete this marker?")){e.removeLayer(b);if(0<b.info.markerId)c.push(b.info.markerId);else{a=f.length;for(var d=L.stamp(b),h=0;h<a;++h)if(L.stamp(f[h])==d){f.splice(h,1);break}}b=!1;n()}},x=function(){if(g){var a={set:g},b=Object.keys(d).length;0<b&&(a.dirty=JSON.stringify(d));0<f.length&&(a["new"]=JSON.stringify(f));0<c.length&&(a.deleted=JSON.stringify(c));0==b&&0==f.length&&0==c.length?alert("Nothing to save."):$.ajax("/savemarkers",{type:"POST",data:a,success:function(a,b,e){a.error?alert("Error saving: "+a.error):(alert("Markers saved!"),d={},f=[],c=[])},error:function(a,b,c){alert("Error saving: "+c)}})}},y=function(){dzMap.map.on("click",w)},w=function(c){dzMap.map.off("click",w);b=a.addMarker(g,0,c.latlng.lat,c.latlng.lng,"","hospital","","");b.setDraggable(!0);b.off("click",p);b.on("dragend",s);b.on("click",t);b.fire("click")};$(document).ready(function(){$("#markerSetsCreateForm").submit(function(a){a.preventDefault();a=$("#markerSetsCreateName").val();var b=$("#markerSetsCreatePassword").val(),c=$("#markerSetsCreateAccess").val();$.ajax("/savemarkers",{type:"POST",data:{name:a,password:b,access:c,map:dzMap.mapId,newset:"Create"},success:function(a,b,c){a.error?alert("Error creating set: "+a.error):dzMap.requestSet(a.id)}})});$("#markerSetsUpdateForm").submit(function(a){a.preventDefault();a=$("#markerSetsUpdateId").val();var b=$("#markerSetsUpdateName").val(),c=$("#markerSetsUpdatePassword").val(),d=$("#markerSetsUpdateAccess").val();$.ajax("/savemarkers",{type:"POST",data:{set:a,name:b,password:c,access:d,map:dzMap.mapId,updateset:"Update"},success:function(a,c,d){a.error?alert("Error updating set: "+a.error):($("#markerSetsUpdateName").val(""),$("#markerSetsUpdatePassword").val(""),$("#markerSetsUpdateAccess").val(0),$("#markerSetsUpdateId").val(""),$("#markerSetsUpdateContainer").hide(),c=$("#userMap"+a.id),c.children().first().text(b),2==a.access&&($("button.btn-primary",c).detach(),$("#visibleMap"+a.id+" button.btn-primary").detach()),c=$("button[data-name]"),c.attr("data-name",a.name),c.attr("data-access",a.access))}})});$("#markerEditForm").submit(function(a){a.preventDefault();a=$("#markerLatInput").val();var c=$("#markerLngInput").val(),e=$("#markerNameInput").val(),k=$("#markerTypeInput").val(),m=$("#markerIconInput").val(),l=$("#markerBuildingInput").val();b&&(b.info.markerId?d[b.info.markerId]={id:b.info.markerId,lat:a,lng:c,name:e,icon:m,type:k,building:l}:f.push({lat:a,lng:c,name:e,icon:m,type:k,building:l}),b.info.editing=!0,b.info.setId=g,b.info.building=l,b.info.type=k,b.info.name=e,b.options.icon instanceof L.DivIcon?(b.setHtml("<span>"+e+"</span>"),b.setClassName("map-label "+l)):b.setTitle(e));b=!1;n()});var c=$("#markerTypeInput"),e=$("#markerIconInput");c.change(function(d){"label"==c.val()?(e.attr("disabled",""),b&&(d=L.divIcon({iconSize:null,className:"map-label "+b.info.building,html:"<span>"+b.info.name+"</span>"}),b.setIcon(d))):(e.removeAttr("disabled"),b&&(d=e.val(),b&&a.markerIcons[d]&&b.setIcon(new a.markerIcons[d])))});e.change(function(d){b&&"label"!=c.val()&&(d=e.val(),b&&a.markerIcons[d]&&b.setIcon(new a.markerIcons[d]))});$("#markerEditNew").click(y);$("#markerEditDelete").click(u);$("#markerEditSave").click(x);$("#markerEditFinish").click(v)});a.buildingOverrides={a_generalstore_01:"supermarket",a_generalstore_01a:"supermarket",misc_deerstand:"deerstand",misc_wellpump:"pump",pumpa:"pump"};a.markerTypes={military:{name:"Military",icon:"red",sized:!0},civilian:{name:"Civilian",icon:"blue",sized:!0},industrial:{name:"Industrial",icon:"yellow",sized:!0},nature:{name:"Nature",icon:"green",sized:!0},neutral:{name:"Neutral",icon:"grey",sized:!0},apple:{name:"Apple Trees",icon:"green",sized:!0},pond:{name:"Water Pond",icon:"cyan",sized:!0},xmastree:{name:"Christmas Tree",icon:"xmastree"},medical:{name:"Medical",icon:"medical"},deerstand:{name:"Deer stand",icon:"deerstand"},feedshack:{name:"Feedshack",icon:"feedshack"},pump:{name:"Water pump",icon:"pump"},fuel:{name:"Fuel Pump",icon:"fuel"},supermarket:{name:"Supermarket",icon:"supermarket"},firestation:{name:"Firestation",icon:"firestation"},policestation:{name:"Policestation",icon:"policestation"},container:{name:"Container",icon:"container"},player_spawn:{name:"Player Spawn",icon:"player_spawn"},zombie:{name:"Zombie",icon:"zombie"},chicken:{name:"Chicken",icon:"chicken"},boar:{name:"Boar",icon:"pig"},cow:{name:"Cow",icon:"cow"},deer:{name:"Deer",icon:"deer"},pig:{name:"Pig",icon:"pig"},rabbit:{name:"Rabbit",icon:"rabbit"},wolf:{name:"Wolf",icon:"wolf"},current:{name:"Post Location",icon:"current"},video:{name:"Video",icon:"video"},image:{name:"Image",icon:"image"},tent:{name:"Tent",icon:"tent"},v3s:{name:"V3S Truck",icon:"bigtruck"},transit_bus:{name:"Transit Bus",icon:"transit_bus"},volga:{name:"Volga",icon:"car"},offroad:{name:"Offroad",icon:"offroad"},boatnetting:{name:"Boat Nettings",icon:"pbx"},carcrash:{name:"Police Crash",icon:"carcrash"},helicrash:{name:"Heli Crashsite",icon:"helicrash"},fridge:{name:"Fridge Container",icon:"container"},helicrashexp:{name:"Heli Crashsite (Exp.)",icon:"helicrashexp"},helicrashstable:{name:"Heli Crashsite (Stable)",icon:"helicrashstable"},uazcrashstable:{name:"Police Car Crashsite (Stable)",icon:"uazcrashstable"},label:{name:"Label"}};a.markerIcons={"red-low":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/red-low.png",iconSize:[8,8]}}),"red-med":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/red-med.png",iconSize:[13,13]}}),"red-high":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/red-high.png",iconSize:[18,18]}}),"blue-low":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/blue-low.png",iconSize:[8,8]}}),"blue-med":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/blue-med.png",iconSize:[13,13]}}),"blue-high":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/blue-high.png",iconSize:[18,18]}}),"yellow-low":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/yellow-low.png",iconSize:[8,8]}}),"yellow-med":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/yellow-med.png",iconSize:[13,13]}}),"yellow-high":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/yellow-high.png",iconSize:[18,18]}}),"green-low":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/green-low.png",iconSize:[8,8]}}),"green-med":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/green-med.png",iconSize:[13,13]}}),"green-high":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/green-high.png",iconSize:[18,18]}}),"cyan-low":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/cyan-low.png",iconSize:[8,8]}}),"cyan-med":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/cyan-med.png",iconSize:[13,13]}}),"cyan-high":L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/cyan-high.png",iconSize:[18,18]}}),"grey-low":L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/neutral-low.png",iconSize:[8,8]}}),xmastree:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/xmas-tree.png",iconSize:[20,24]}}),pond:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/pond.png",iconSize:[17,19]}}),medical:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/hospital.png",iconSize:[19,18]}}),deerstand:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/deerstand.png",iconSize:[18,19]}}),feedshack:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/deerstand-blue.png",iconSize:[18,19]}}),pump:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/waterpump.png",iconSize:[17,19]}}),fuel:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/fuelpump.png",iconSize:[20,19]}}),supermarket:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/supermarket.png",iconSize:[22,17]}}),firestation:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/firestation.png",iconSize:[18,18]}}),policestation:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/policestation.png",iconSize:[18,18]}}),container:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/container.png",iconSize:[18,24]}}),player_spawn:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/player-spawn.png",iconSize:[15,23]}}),zombie:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/skull.png",iconSize:[18,24]}}),chicken:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/chicken.png?2",iconSize:[16,17]}}),cow:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/cow.png?2",iconSize:[28,21]}}),deer:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/deer.png?2",iconSize:[23,22]}}),pig:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/pig.png?2",iconSize:[27,16]}}),rabbit:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/rabbit.png?2",iconSize:[13,17]}}),wolf:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/wolf.png?2",iconSize:[18,18]}}),current:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/photo.png",iconSize:[16,24]}}),video:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/video.png?4",iconSize:[19,19]}}),image:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/image.png?2",iconSize:[19,19]}}),tent:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/tent-blue.png",iconSize:[24,21]}}),bigtruck:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/bigtruck.png",iconSize:[34,19]}}),transit_bus:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/transit_bus.png",iconSize:[39,17]}}),car:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/car.png",iconSize:[27,17]}}),offroad:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/offroad.png",iconSize:[30,17]}}),helicrash:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/helicrash.png",iconSize:[30,14]}}),uazcrashstable:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/uaz.png",iconSize:[30,17]}}),carcrash:L.Icon.extend({options:{iconUrl:"http://www.dayztv.com/map/static/img/markers/policecar.png?2",iconSize:[27,17]}}),helicopter:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/helicopter.png",iconSize:[30,14]}}),motorcycle:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/motorcycle.png",iconSize:[29,18]}}),bike:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/bike.png",iconSize:[28,17]}}),bicycle:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/bike.png",iconSize:[28,17]}}),boat:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/boat.png",iconSize:[34,16]}}),atv:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/atv.png",iconSize:[26,16]}}),truck:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/truck.png",iconSize:[34,16]}}),helicrashexp:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/helicrash.png",iconSize:[30,14]}}),helicrashstable:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/helicrash.png",iconSize:[30,14]}}),bus:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/bus.png",iconSize:[39,17]}}),pbx:L.Icon.extend({options:{iconUrl:dayztv_staticUrl+"img/markers/pbx.png",iconSize:[34,14]}}),tractor:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/tractor.png",iconSize:[26,21]}}),uaz:L.Icon.extend({options:{iconUrl:dayz_staticUrl+"img/markers/uaz.png",iconSize:[30,17]}}),};a.zIndex={high:120,med:60,low:100,pump:110,supermarket:140,label:30,"default":80};a.sizeThresholds=[-1,7,16];a.sizeNames=["low","med","high"];a.nameSizes={low:[0,7],med:[8,16],high:[17,999]}},markerSetShareButton=function(){var a=$(this).attr("data-id");prompt("Copy and paste the following URL to link to this set:","http://"+location.hostname+location.pathname+"#set="+a)},markerSetEditButton=function(){$("#markerSetsModal").modal("hide");var a=$(this).attr("data-id");dzMarkers.editSet(a)},markerSetToggleButton=function(){var a=$(this).attr("data-id");dzMarkers.toggleSet(a);dzMap.loadedSets[a]&&(dzMap.loadedSets[a].hidden?$(this).text("Show"):$(this).text("Hide"))},markerSetAddButton=function(){var a=$(this).attr("data-id");dzMap.requestSet(a)},markerSetRemoveButton=function(){var a=$(this).attr("data-id");dzMap.removeSet(a)},markerSetUpdateButton=function(){var a=$(this),e=a.attr("data-id"),k=a.attr("data-name"),a=a.attr("data-access");$("#markerSetsUpdateContainer").show();$("#markerSetsUpdateName").val(k);$("#markerSetsUpdateAccess").val(a);$("#markerSetsUpdateId").val(e)};